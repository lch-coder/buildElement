import{g as e,d as a,u as l,a as s,b as t,r,c as o,e as n,f as u,h as i,i as d,j as p,w as m,k as c,E as f,o as v,n as x,p as _,l as y,m as h,q as w,s as g,t as j,v as b}from"./index-07ab5625.js";import{E as k,a as E}from"./el-form-item-48a3013c.js";import{E as V}from"./el-link-5e728e29.js";import{E as q}from"./el-checkbox-0c07f382.js";/* empty css                 *//* empty css                  */import{_ as C}from"./plugin-vue_export-helper-1b428a4d.js";import"./_baseIsEqual-50ced413.js";const I={class:"login"},P={"my-4":"","text-right":""},U=(e=>(_("data-v-265f1e43"),e=e(),y(),e))((()=>d("div",{"text-center":"","pt-100px":""},[d("div",null,[d("span",{"font-600":"","text-4xl":"",class:"color-p"},"Build Element")]),d("div",{"text-sm":"","mt-sm":"","mb-4xl":"",class:"color-s"},"基于 Vue3 + Ts + Element Plus 的后台管理系统")],-1))),B={w328px:"",ma:""},z=h(" 忘记密码? "),A=h(" 登录 "),M=C(a({__name:"login",setup(a){const _=l(),y=s(),h=t(),C=r({username:"admin",password:"123456"}),M=o(!1),R=o(),T={username:{required:!0,message:"请输入用户名"},password:{required:!0,message:"请输入密码"}},D=()=>{var a;null==(a=R.value)||a.validate((a=>{return l=this,s=null,t=function*(){var l;if(a){M.value=!0;let{data:a}=yield((a={})=>e("/api/user/login",a))(C);M.value=!1,_.setUserInfo(a.data);let{data:s}=yield w();(null==(l=null==s?void 0:s.data)?void 0:l.length)>0?(g(s.data),h.push({path:y.permissionMenu})):j.warning("没有菜单权限")}},new Promise(((e,a)=>{var r=e=>{try{n(t.next(e))}catch(l){a(l)}},o=e=>{try{n(t.throw(e))}catch(l){a(l)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(r,o);n((t=t.apply(l,s)).next())}));var l,s,t}))},F=n(),G=u(F);return(e,a)=>{const l=f,s=b,t=E,r=q,o=V,n=k;return v(),i("div",I,[d("div",P,[p(l,{type:"text","mr-5":"",onClick:a[0]||(a[0]=e=>c(G)())},{default:m((()=>[d("div",{class:x(c(F)?"i-ep-moon":"i-ep-sunny"),"text-xl":""},null,2)])),_:1})]),U,d("div",B,[p(n,{ref_key:"formRef",ref:R,model:C,rules:T},{default:m((()=>[p(t,{prop:"username"},{default:m((()=>[p(s,{modelValue:C.username,"onUpdate:modelValue":a[1]||(a[1]=e=>C.username=e),placeholder:"请输入用户名","prefix-icon":"i-ep-user",clearable:""},null,8,["modelValue"])])),_:1}),p(t,{prop:"password"},{default:m((()=>[p(s,{modelValue:C.password,"onUpdate:modelValue":a[2]||(a[2]=e=>C.password=e),placeholder:"请输入密码",type:"password","prefix-icon":"i-ep-lock",clearable:""},null,8,["modelValue"])])),_:1}),p(t,null,{default:m((()=>[p(r,{label:"自动登录"}),p(o,{"ml-a":"",type:"primary",underline:!1},{default:m((()=>[z])),_:1})])),_:1}),p(t,null,{default:m((()=>[p(l,{loading:M.value,type:"primary",class:"w-100%",onClick:D},{default:m((()=>[A])),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-265f1e43"]]);export{M as default};
